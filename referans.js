textReveal({target:"#referenzen-h1",repeat:false,intervalSpeed:50,transitionSpeed:1,offsetShow:100,selection:"word"});$(".cms-link").click(function(e){if(drag===false){var cmsCard=$(".cms-referenzen__hero-bg-wrapper");var cardWidth=cmsCard.outerWidth();var cardHeight=cmsCard.outerHeight();var cardTop=cmsCard.offset().top;var cardLeft=cmsCard.offset().left;var itemTop=$(this).offset().top;var itemLeft=$(this).offset().left;var topPo=cardTop-itemTop;var leftPo=cardLeft-itemLeft;$("body").css("overflow","hidden");if(globalViewportWidth<480){cardHeight="100vh"}$(this).css({height:cardHeight,width:cardWidth,top:topPo,left:leftPo,"z-index":"1000"});$(".referenzen-page__section").css("z-index","95");$(".referenzen__collection__wrapper").css("z-index","1000");$(this).find(".referenzen__itembox").css("opacity","0");e.preventDefault();var moduleURL=$(this).attr("href");var el=$(this);setTimeout(function(){el.css({height:"100%",width:"100%",top:"0",left:"0","z-index":"1"});$(".referenzen-page__section").css("z-index","10");$(".referenzen__collection__wrapper").css("z-index","5");$("body").css("overflow","auto");el.find(".referenzen__itembox").css("opacity","1")},2200)}});var referenzenSwiper;$(document).ready(function(){referenzenSwiper=new Swiper(".referenzen__collection__container",{wrapperClass:"referenzen__collection__wrapper",slideClass:"referenzen__collection__item",navigation:{nextEl:"#referenzenNext",prevEl:"#referenzenPrev"},slidesPerView:"auto",direction:"horizontal",spaceBetween:0,speed:500,touchStartPreventDefault:false,grabCursor:true,freeMode:true,mousewheel:{forceToAxis:true,invert:true}});if(globalViewportWidth<991){referenzenSwiper.params.freeMode=false}});$(".filter_close-wrapper").hover(function(){$(this).siblings(".filter_close-img").toggleClass("rotated")});var filterAngebot=[];var filterSearch;var filterFunction;var filterTargetGallery;var filterTargetList;function setAmount(){var s=0;if($("#filterSearch input").val()!=""){s=1}var cb=filterAngebot.length+s;if(cb!==0){$(".filter_blue-indicator").show();$("#filter-indicator span").text(cb)}else{$(".filter_blue-indicator").hide();$("#filter-indicator span").text(cb)}referenzenSwiper.update()}function findCommonElement(array1,array2){for(let i=0;i<array1.length;i++){for(let j=0;j<array2.length;j++){if(array1[i]===array2[j]){return true}}}return false}function filteringSetup(){setAmount();filterTargetGallery=$(".referenzen__collection__wrapper").isotope({itemSelector:".referenzen__collection__item",layoutMode:"horiz",hiddenStyle:{opacity:0},visibleStyle:{opacity:1},getSortData:{name:".name"}});filterTargetList=$(".r-list__collection__wrapper").isotope({itemSelector:".r-list__collection__item",layoutMode:"vertical",hiddenStyle:{opacity:0},visibleStyle:{opacity:1},getSortData:{name:".name"}});filterTargetGallery.on("arrangeComplete",function(){setAmount()});filterFunction=function(){var itemAngebot=[];var stateAngebot=false;$(this).find(".ref-filter__angebot").each(function(){itemAngebot.push($(this).text())});if(findCommonElement(itemAngebot,filterAngebot)||filterAngebot.length===0){stateAngebot=true}var qsRegex=new RegExp(filterSearch,"gi");var stateSearch=qsRegex?$(this).text().match(qsRegex):true;if(stateSearch&&stateAngebot){return true}else{return false}}}function debounce(fn,threshold){var timeout;threshold=threshold||100;return function debounced(){clearTimeout(timeout);var args=arguments;var _this=this;function delayed(){fn.apply(_this,args)}timeout=setTimeout(delayed,threshold)}}$("#checkboxFilters [type=checkbox]").change(function(){isotopeFiltering()});$(".p-list__filter-column input").keyup(debounce(function(){isotopeFiltering()},200));function isotopeFiltering(){filterSearch=$("#filterSearch input").val();filterAngebot=[];$(".w-checkbox input[type=checkbox]").each(function(){if($(this).is(":checked")){filterAngebot.push($(this).attr("name"))}});filterTargetGallery.isotope({filter:filterFunction});filterTargetList.isotope({filter:filterFunction})}$("#filterRemove").click(function(){$("#filterSearch input").val("");$(".w-checkbox input[type=checkbox]:checked").click();setAmount()});$(".r-list__collection__item").each(function(){var el=$(this);var t=el.find(".slug").text();var c=el.find(".filter-angebot_collection");$(".referenzen__collection__item").each(function(){if(t===$(this).find(".slug").text()){c.clone().appendTo($(this).find(".filters-hide"));el.remove()}})});$(document).ready(function(){filteringSetup();var url=document.location.href;var path=document.location.pathname;var target=url.substring(url.indexOf("=")+1);if(!target.includes(path)){$(".w-checkbox #"+target).click();setTimeout(function(){isotopeFiltering()},200);setTimeout(function(){isotopeFiltering()},500)}});$(".popup_bg").hover(function(){$(".cursor-close").toggleClass("active")});$(".popup_bg").click(function(){$(".cursor-box").removeClass("cursor-box__active")});